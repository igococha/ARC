<beast version='2.6'
       namespace='beast.app.beauti
       :beast.core
       :beast.evolution.branchratemodel
       :beast.evolution.speciation
       :beast.evolution.tree.coalescent
       :beast.core.util
       :beast.evolution.nuc
       :beast.evolution.operators
       :beast.evolution.sitemodel
       :beast.evolution.substitutionmodel
       :beast.evolution.likelihood
       :beast.evolution:beast.math.distributions'
       templateinfo='template for the Additive Relaxed Clock Model (ARC)'>
       
  <mergewith point='clockModelTemplates'>
 
  
  <subtemplate id='ARC' class='beast.evolution.branchratemodel.ARClockModel'
               mainid='ARClock.c:$(n)'
               suppressInputs='beast.evolution.branchratemodel.ARClockModel.clock.rate
               ,beast.evolution.branchratemodel.ARClockModel.rateCategories
               ,beast.evolution.branchratemodel.ARClockModel.rateProbs
               ,beast.evolution.branchratemodel.ARClockModel.numberOfDiscreteRates
               ,beast.evolution.branchratemodel.ARClockModel.tree'>
  <![CDATA[
   	<plugin spec='beast.evolution.branchratemodel.ARClockModel' id='ARClock.c:$(n)' tree='@Tree.t:$(n)'>
   	  <rateProbs spec='parameter.RealParameter' id='arcRateProbs.c:$(n)'  dimension='1' value='0.5' estimate='true' />    	
	  <rateMean spec="parameter.RealParameter"  id='arcRateMean.c:$(n)' value=".005" lower=".0001" upper="10.0" estimate='true' />
	  <rateOmega spec="parameter.RealParameter" id='arcRateOmega.c:$(n)' value=".5" lower="0.1" upper="30" estimate='true' /> 
	</plugin>  
	
	<operator id='arcRateMeanScaler.c:$(n)' spec='ScaleOperator' scaleAll='false' scaleFactor="0.75" weight="3" parameter='@arcRateMean.c:$(n)' /> 
	<operator id='arcRateOmegaScaler.c:$(n)' spec='ScaleOperator' scaleAll='false' scaleFactor="0.75" weight="3" parameter='@arcRateOmega.c:$(n)'/>
	
    <prior id="arcRateMeanPrior.c:$(n)"  x="@arcRateMean.c:$(n)">
		<distr spec="beast.math.distributions.Gamma">
		  <parameter name="alpha" value="0.005 " estimate="false" /> 
		  <parameter name="beta" value="1.0" estimate="false" />
		</distr>
	</prior>
	    
   <prior id="arcRateOmegaPrior.c:$(n)" x="@arcRateOmega.c:$(n)">
		<distr spec="beast.math.distributions.Gamma">
			<parameter name="alpha" value="0.1" estimate="false" />
			<parameter name="beta" value="1.0"  estimate="false" />
		</distr>
    </prior>    
  
  ]]>
 
  <connect srcID='arcRateMean.c:$(n)' targetID='state' inputName='stateNode' 
           if= 'inlikelihood(arcRateMean.c:$(n)) and arcRateMean.c:$(n)/estimate=true'  />   
  <connect srcID='arcRateOmega.c:$(n)' targetID='state' inputName='stateNode'
           if='inlikelihood(arcRateOmega.c:$(n)) and arcRateOmega.c:$(n)/estimate=true'/>
     
  <connect srcID='arcRateMeanScaler.c:$(n)' targetID='mcmc' inputName='operator'
            if='inlikelihood(arcRateMean.c:$(n)) and arcRateMean.c:$(n)/estimate=true' >
           Scale mean of rate distribution of partition c:$(n)
  </connect>
  
  <connect srcID='arcRateOmegaScaler.c:$(n)' targetID='mcmc' inputName='operator'
           if='inlikelihood(arcRateOmega.c:$(n)) and arcRateOmega.c:$(n)/estimate=true'>
           Scale omega of rate distribution of partition c:$(n)
  </connect>
 
  <connect srcID='arcRateMeanPrior.c:$(n)' targetID='prior' inputName='distribution'
            if='inlikelihood(arcRateMean.c:$(n)) and inlikelihood(Tree.t:$(n)) and arcRateMean.c:$(n)/estimate=true'>
            prior mean of mu (mean ARC distribution) of partition c:$(n)
   </connect>
  
  <connect srcID='arcRateOmegaPrior.c:$(n)' targetID='prior' inputName='distribution'
            if='inlikelihood(arcRateOmega.c:$(n))'>
            prior mean of omega (mean ARC distribution) of partition c:$(n)
   </connect>
  
  </subtemplate>
  
     
  </mergewith>

</beast>

